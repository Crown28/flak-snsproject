{% extends "layout.html" %}
{% block title %}
Welcome!
{% endblock %}
{% block main %}
<style>
  body, html {
    height: 100%;
    margin: 0;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
  }
  .user-profile {
    display: flex;
    align-items: center; /* 이미지와 사용자 이름을 세로 중앙 정렬 */
    margin-bottom: 10px; /* 프로필과 포스트 이미지 사이의 간격 */
  }
  
  .profile-pic {
    width: 50px; /* 프로필 사진의 크기 */
    height: 50px; /* 프로필 사진의 크기 */
    border-radius: 50%; /* 프로필 사진을 원형으로 만듦 */
    object-fit: cover; /* 이미지 비율을 유지하면서 요소에 맞게 조절 */
    margin-right: 10px; /* 프로필 사진과 사용자 이름 사이의 간격 */
    margin-left: 20px;
  }
  
  .username {
    font-weight: bold; /* 사용자 이름을 굵게 표시 */
    margin-left: 10px;
  }
  .container {
    display: flex;
    height: 100%;
  }
  .sidebar-left, .sidebar-right {
    width: 40%; /* 좌우 사이드바 너비 */
    overflow-y: auto;
    background-color: #ffffff;
    padding: 20px;
    border-right: 1px solid #ddd; /* 오른쪽에 연한 회색 선 추가 */
  }
  .content {
    flex: 3; /* 중앙 콘텐츠 영역 너비 조정 */
    overflow-y: auto;
    background-color: white;
    padding: 20px;
    border-left: 1px solid #ddd; /* 왼쪽에 연한 회색 선 추가 */
  }
  .post {
    background-color: white;
    margin-bottom: 20px;
    padding: 10px;
    border-radius: 10px;
    overflow: hidden; /* post 내부의 내용이 넘칠 경우 숨김 처리 */
    box-sizing: border-box; /* padding과 border를 포함한 크기로 지정 */
    
  }
  .post img {
    max-width: 100%;
    border-radius: 10px;
    margin-bottom: 10px; /* 이미지와 post-content 사이의 간격 추가 */
  }
  .profile {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
  }
  .profile img {
    width: 50px; /* 프로필 이미지 크기 */
    height: 50px; /* 프로필 이미지 크기 */
    border-radius: 50%;
    margin-right: 10px;
  }
  .user-id, .profile-name {
    margin: 10px 0;
  }
  .post-content,
  .comments {
    float: left;
    clear: both; /* float 속성을 사용한 정렬을 초기화 */
    display: block; 
    margin-left:20px;
    margin-bottom: 10px; /* 요소 사이의 간격 조정 */
}

  .sidebar-right img {
    width: 50px; /* 이미지의 크기 설정 */
    height: 50px; /* 이미지의 크기 설정 */
    border-radius: 50%; /* 이미지를 동그랗게 만듦 */
    object-fit: cover; /* 이미지 비율을 유지하면서, 지정된 너비와 높이에 맞춤 */
}
</style>
<body>
  <div class="container">
    <div class="sidebar-left">
      <!-- 왼쪽 사이드바 콘텐츠 -->
    </div>
    <div class="content">
        <div class="posts">
          {% for post in posts %}
          <div class="post">
            <div class="user-profile">
              <img class="profile-pic" src="{{ post.profile_pic }}" alt="User Profile Picture">
              <div class="username">{{ post.username }}</div>
            </div>
            <img src="{{ post.post_image }}" alt="Post Image">           
            <div class="post-content">{{ post.content }}</div>
            <div class="likes">
              <button class="like-button" data-post-id="{{ post.id }}">Like</button>
              <span class="like-count">{{ post.likes }}</span>
            </div>
            <div class="comments">Comments: {{ post.comments }}</div>
          </div>
          {% endfor %}
        </div>
      </div>
      
  
    </div>
    <div class="sidebar-right">
        <table>
            <thead>
                <tr>
                    <th></th> <!-- 이미지를 위한 헤더 셀 추가 -->
                    
                </tr>
            </thead>
            <tbody>
              <nav class="navbar bg-body-tertiary">
                  <form class="container-fluid" onsubmit="return false;">
                      <div class="input-group">
                          <span class="input-group-text" id="basic-addon1">@</span>
                          <input type="text" class="form-control" id="searchInput" placeholder="Search User" aria-label="Search User" aria-describedby="basic-addon1">
                      </div>
                  </form>
              </nav>
              
              <div class="user-list" style="display: none;">
                <ul>
                  {% for user in users %}
                  <li class="user">
                      <img src="{{ user.profile_pic }}" alt="User Image" class="user-image">
                      <a href="{{ url_for('user_page', user_id=user['user_id']) }}">{{ user['username'] }}</a>
                  </li>
                  {% endfor %}
              </ul>
              </div>
          </tbody>
          
          <script>
            document.addEventListener("DOMContentLoaded", function() {
                const searchInput = document.getElementById('searchInput');
                const userList = document.querySelector('.user-list');
            
                searchInput.addEventListener('input', function() {
                    const searchTerm = searchInput.value.toLowerCase();
                    const users = userList.querySelectorAll('.user');
                    let found = false;
            
                    if (searchTerm === '') {
                        userList.style.display = 'none';
                        return;
                    }
            
                    users.forEach(function(user) {
                        const username = user.textContent.toLowerCase();
                        if (username.includes(searchTerm)) {
                            user.style.display = 'block';
                            found = true;
                        } else {
                            user.style.display = 'none';
                        }
                    });
            
                    // 사용자를 찾지 못한 경우 목록을 숨깁니다.
                    if (!found) {
                        userList.style.display = 'none';
                    } else {
                        userList.style.display = 'block';
                    }
                });
            });
            </script>
            </tbody>
        </table>
    </div>
    
    
  
  </div>
</body>
{% endblock %}
